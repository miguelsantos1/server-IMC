<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
        <link rel="stylesheet" type="text/css" href="css/style.css" media="screen"/>
        <title>Atualizar Usuário</title>
    </head>
    <body>
        <h2>Atualizar Usuário</h2><br />
        <form method="post" onsubmit='putUser()'>
            <input type="text"  id="id" placeholder="Insira seu ID" required><br><br>
            <input type="text" name='nome' id="nome" placeholder="Nome" required><br><br>
            <input type="text" name="CPF" id="CPF" placeholder="CPF" required ><br><br>
            <input type="number" name="rendimento" id="rendimento" placeholder="Rendimento Anual" required ><br><br>
            <input type="submit" value="Atualizar Usuário" style="background-color:#cbb5f7c9; color:#0e081c; font-weight: bolder; cursor: pointer;" />
        </form><br>
        </form><br />
        <a href="index.html">Voltar para o início</a>


        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
           <script>

        async function putUser() {
            
            event.preventDefault()
            
            const id = document.querySelector('#id').value
            const inputNome = document.querySelector('#nome')
            const inputCPF = document.querySelector('#CPF')
            const inputRendimento = document.querySelector('#rendimento')

            const nome = inputNome.value
            const CPF = inputCPF.value
            const rendimento = inputRendimento.value
        
            try {
                axios.put(`http://localhost:3000/putUser/${id}`, {
                    nome: nome,
                    CPF: CPF,
                    rendimento: rendimento
                })
                .then(response => console.log(response.data))

                console.log("Usuário atualizado")
            } catch (err) {

                console.log("erro na api")
                console.log(err)
            }

}

           </script>
    </body>
</html>
